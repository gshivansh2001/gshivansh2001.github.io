<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> How to Obtain and Interpret Covariate Estimates in SDID Using Stata | Shivansh Gupta </title> <meta name="author" content="Shivansh Gupta"> <meta name="description" content="Understanding what SDID reports for covariates and how to correctly recover coefficients and p-values"> <meta name="keywords" content="academic-website"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" href="/assets/css/scholar-icons.css?62b2ac103a88034e6882a5be5f3e2772"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%E2%9A%9B%EF%B8%8F&lt;/text&gt;&lt;/svg&gt;"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://gshivansh2001.github.io/blog/2025/sdidcov/"> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> Shivansh Gupta </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">About </a> </li> <li class="nav-item "> <a class="nav-link" href="/publications/">Research </a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">CV </a> </li> <li class="nav-item active"> <a class="nav-link" href="/blog/">Blog </a> </li> <li class="nav-item "> <a class="nav-link" href="/books/">Beyond Research </a> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5" role="main"> <div class="post"> <header class="post-header"> <h1 class="post-title">How to Obtain and Interpret Covariate Estimates in SDID Using Stata</h1> <p class="post-meta"> Created on December 25, 2025 </p> <p class="post-tags"> <a href="/blog/2025"> <i class="fa-solid fa-calendar fa-sm"></i> 2025 </a> </p> </header> <article class="post-content"> <div id="markdown-content"> <p>While working on an SDID specification for a recent project, I encountered an unexpected problem: the covariate coefficients that Stata reports inside <code class="language-plaintext highlighter-rouge">e(beta)</code> after running <code class="language-plaintext highlighter-rouge">sdid</code> did not match the coefficients I obtained from a corresponding fixed-effects regression using <code class="language-plaintext highlighter-rouge">reghdfe</code>. The ATT estimates were stable, but the covariate estimates were not only numerically different—they sometimes differed by orders of magnitude.</p> <p>This led me into a deeper investigation, and as I soon realized, the issue is not a bug or a computational error. Instead, it arises from a fundamental feature of the SDID estimator and the way Stata implements covariate adjustment. After reviewing the SDID documentation, reading the Statalist discussions, and experimenting with both the <code class="language-plaintext highlighter-rouge">optimized</code> and <code class="language-plaintext highlighter-rouge">projected</code> methods, the logic behind these discrepancies finally became clear. This post summarizes what I learned.</p> <hr> <h2 id="the-initial-puzzle-why-do-sdid-and-reghdfe-give-different-covariate-coefficients">The Initial Puzzle: Why Do SDID and reghdfe Give Different Covariate Coefficients?</h2> <p>To illustrate the issue, consider the following SDID command, taken from an example posted by Wenhan Yan on Statalist (2024):</p> <div class="language-stata highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">sdid</span><span class="w"> </span><span class="n">l_wo</span><span class="w"> </span><span class="n">state</span><span class="w"> </span><span class="n">date</span><span class="w"> </span><span class="n">treat</span><span class="p">,</span><span class="w"> </span><span class="n">vce</span><span class="p">(</span><span class="n">bootstrap</span><span class="p">)</span><span class="w"> </span><span class="n">method</span><span class="p">(</span><span class="n">sdid</span><span class="p">)</span><span class="w"> </span><span class="c1">///</span>
<span class="w">     </span><span class="n">covariates</span><span class="p">(</span><span class="n">l_pop</span><span class="w"> </span><span class="n">l_black</span><span class="w"> </span><span class="n">l_unemp</span><span class="w"> </span><span class="n">l_inc</span><span class="w"> </span><span class="n">l_HS</span><span class="w"> </span><span class="n">l_college</span><span class="w"> </span><span class="n">lgdp</span><span class="p">,</span><span class="w"> </span><span class="n">optimized</span><span class="p">)</span>
</code></pre></div></div> <p>Immediately after running SDID, we can list the covariate coefficients:</p> <div class="language-stata highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">mat</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="nf">e</span><span class="p">(</span><span class="n">beta</span><span class="p">)</span>
</code></pre></div></div> <p>The output contains a vector of coefficients that SDID used during the residualization step. However, when Wenhan attempted to replicate these coefficients using a standard two-way fixed effects regression on the never-treated units:</p> <div class="language-stata highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">egen</span><span class="w"> </span><span class="n">W</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mean</span><span class="p">(</span><span class="n">treat</span><span class="p">),</span><span class="w"> </span><span class="n">by</span><span class="p">(</span><span class="n">state</span><span class="p">)</span>

<span class="n">reghdfe</span><span class="w"> </span><span class="n">l_wo</span><span class="w"> </span><span class="n">l_pop</span><span class="w"> </span><span class="n">l_black</span><span class="w"> </span><span class="n">l_unemp</span><span class="w"> </span><span class="n">l_inc</span><span class="w"> </span><span class="n">l_HS</span><span class="w"> </span><span class="n">l_college</span><span class="w"> </span><span class="n">lgdp</span><span class="w"> </span><span class="c1">///</span>
<span class="w">        </span><span class="kr">if</span><span class="w"> </span><span class="n">W</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="n">absorb</span><span class="p">(</span><span class="n">state</span><span class="w"> </span><span class="n">date</span><span class="p">)</span><span class="w"> </span><span class="n">cluster</span><span class="p">(</span><span class="n">state</span><span class="p">)</span>
</code></pre></div></div> <p>the two sets of coefficients did not align at all. The differences were so pronounced that they could not be attributed to simple sampling noise.</p> <hr> <h2 id="why-sdids-covariate-coefficients-behave-differently">Why SDID’s Covariate Coefficients Behave Differently</h2> <p>Covariates in SDID are not estimated for inference. Their purpose is <strong>solely to residualize the outcome variable</strong> so that the synthetic control is constructed using the portion of the outcome that is not explained by observed covariates. This is fundamentally different from regression, where covariates are explanatory variables whose coefficients are interpreted.</p> <p>SDID cleans the outcome using:</p> \[\tilde Y_{it} = Y_{it} - X_{it} \hat\beta\] <p>SDID then finds the weights using $\tilde Y_{it}$, not the original outcome. The point of estimating $\hat\beta$ is therefore to remove predictable variation before applying the SDID optimization. The way SDID computes $\hat\beta$ depends entirely on whether the user selects <code class="language-plaintext highlighter-rouge">optimized</code> or <code class="language-plaintext highlighter-rouge">projected</code>.</p> <hr> <h2 id="optimized-vs-projected-two-very-different-residualization-strategies">Optimized vs. Projected: Two Very Different Residualization Strategies</h2> <h3 id="1-optimized"><strong>1. Optimized</strong></h3> <p>Stata estimates $\hat\beta$ using <em>all</em> units, treated and untreated:</p> <ul> <li>Treated dynamics contaminate the regression.</li> <li>Imbalances flow directly into $\hat\beta$.</li> <li>The coefficients in <code class="language-plaintext highlighter-rouge">e(beta)</code> <strong>cannot</strong> be replicated by any regression.</li> </ul> <p>This explains why optimized output deviates sharply from a fixed-effects regression.</p> <h3 id="2-projected"><strong>2. Projected</strong></h3> <p>The projected method estimates $\hat\beta$ <strong>only using never-treated units</strong>:</p> <ul> <li>The logic mirrors that covariates should reflect untreated outcome behavior.</li> <li>The coefficients inside <code class="language-plaintext highlighter-rouge">e(beta)</code> <strong>match exactly</strong> with a regression on untreated units.</li> <li>Standard errors and p-values can be obtained via <code class="language-plaintext highlighter-rouge">reghdfe</code>.</li> </ul> <p>This aligns with Daniel PV’s guidance in multiple Statalist threads.</p> <hr> <h2 id="how-to-correctly-recover-covariate-coefficients-and-standard-errors">How to Correctly Recover Covariate Coefficients and Standard Errors</h2> <h3 id="step-1-identify-units-that-are-never-treated"><strong>Step 1: Identify units that are never treated</strong></h3> <div class="language-stata highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">egen</span><span class="w"> </span><span class="n">W</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mean</span><span class="p">(</span><span class="n">treated</span><span class="p">),</span><span class="w"> </span><span class="n">by</span><span class="p">(</span><span class="n">state</span><span class="p">)</span>
</code></pre></div></div> <h3 id="step-2-run-a-regression-only-on-those-units"><strong>Step 2: Run a regression only on those units</strong></h3> <div class="language-stata highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">reghdfe</span><span class="w"> </span><span class="n">outcome</span><span class="w"> </span><span class="n">covariates</span><span class="w"> </span><span class="kr">if</span><span class="w"> </span><span class="n">W</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="n">absorb</span><span class="p">(</span><span class="n">state</span><span class="w"> </span><span class="n">date</span><span class="p">)</span><span class="w"> </span><span class="n">cluster</span><span class="p">(</span><span class="n">state</span><span class="p">)</span>
</code></pre></div></div> <p>This regression gives valid coefficient estimates, standard errors, and p-values <strong>only when SDID uses the projected method</strong>.</p> <hr> <h2 id="why-covariate-p-values-are-often-insignificant">Why Covariate p-values Are Often Insignificant</h2> <p>Users in both Statalist threads noticed that covariate p-values are nearly always insignificant. This is expected because:</p> <ul> <li>Covariates are not part of the causal effect,</li> <li>They serve only to improve balance,</li> <li>Their coefficients are not meant to be interpreted.</li> </ul> <p>Insignificance does not signal a poor model.</p> <hr> <h2 id="which-method-should-you-use">Which Method Should You Use?</h2> <h3 id="projected-recommended"><strong>Projected (recommended)</strong></h3> <ul> <li>Coefficients are interpretable.</li> <li>Standard errors can be recovered.</li> <li>Theoretical justification is clearer.</li> </ul> <h3 id="optimized"><strong>Optimized</strong></h3> <ul> <li>Works for ATT estimation.</li> <li>Covariate coefficients are not interpretable or replicable.</li> <li>Use only if covariate inference is unnecessary.</li> </ul> <hr> <h2 id="final-thoughts">Final Thoughts</h2> <p>My initial confusion comparing SDID and reghdfe outputs ended up being an instructive reminder that SDID handles covariates very differently from standard regression models. Covariates in SDID belong to the preprocessing logic—not to the final effect estimation step. Once this distinction became clear, the behavior of optimized and projected methods made sense, and obtaining valid standard errors became straightforward.</p> <hr> <h2 id="references">References</h2> <ul> <li> <p>Statalist thread (2024): <em>SDID: Obtain the coefficients and Std. Err. of covariates</em><br> https://www.statalist.org/forums/forum/general-stata-discussion/general/1758770-sdid-obtain-the-coefficients-and-std-err-of-covariates</p> </li> <li> <p>Statalist thread (2023): <em>How to discern coefficients and their p-values of covariates using sdid</em><br> https://www.statalist.org/forums/forum/general-stata-discussion/general/1718121-how-to-discern-the-coefficients-and-their-p-values-of-covariates-using-sdid</p> </li> <li>Arkhangelsky et al. (2021). <em>Synthetic Difference-in-Differences.</em> </li> <li>Hirshberg &amp; Klosin (2024). <em>Synthetic Differences-in-Differences with Covariates.</em> </li> </ul> </div> </article> <br> <hr> <br> <ul class="list-disc pl-8"></ul> <h2 class="text-3xl font-semibold mb-4 mt-12">Enjoy Reading This Article?</h2> <p class="mb-2">Here are some more articles you might like to read next:</p> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2025/sdidI/">What Really Happens When You Add Covariates to SDID</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2024/pmf/">Proabilistic Matrix Factorization</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2023/vc/">Variational Calculus</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2023/rdp/">Rényi DP</a> </li> </div> </div> <footer class="fixed-bottom" role="contentinfo"> <div class="container mt-0"> © Copyright 2025 Shivansh Gupta. Last updated: December 25, 2025. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script> <script defer src="/assets/js/masonry.js?a0db7e5d5c70cc3252b3138b0c91dcaf" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script src="/assets/js/no_defer.js?2781658a0a2b13ed609542042a859126"></script> <script defer src="/assets/js/common.js?c15de51d4bb57887caa2c21988d97279"></script> <script defer src="/assets/js/copy_code.js?c8a01c11a92744d44b093fc3bda915df" type="text/javascript"></script> <script defer src="/assets/js/jupyter_new_tab.js?d9f17b6adc2311cbabd747f4538bb15f"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script> <script src="/assets/js/mathjax-setup.js?a5bb4e6a542c546dd929b24b8b236dfd"></script> <script defer src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6" crossorigin="anonymous"></script> <script defer src="/assets/js/progress-bar.js?2f30e0e6801ea8f5036fa66e1ab0a71a" type="text/javascript"></script> </body> </html>